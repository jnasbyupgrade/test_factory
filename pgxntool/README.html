<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="author" content="Easier PGXN development">
<title>PGXNtool</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>PGXNtool</h1>
<div class="details">
<span id="author" class="author">Easier PGXN development</span><br>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_install">1. Install</a></li>
<li><a href="#_development">2. Development</a></li>
<li><a href="#_usage">3. Usage</a></li>
<li><a href="#_make_targets">4. make targets</a>
<ul class="sectlevel2">
<li><a href="#_html">4.1. html</a></li>
<li><a href="#_test">4.2. test</a></li>
<li><a href="#_testdeps">4.3. testdeps</a></li>
<li><a href="#_results">4.4. results</a></li>
<li><a href="#_tag">4.5. tag</a></li>
<li><a href="#_dist">4.6. dist</a></li>
<li><a href="#_pgxntool_sync">4.7. pgxntool-sync</a></li>
<li><a href="#_pgtle">4.8. pgtle</a></li>
<li><a href="#_check_pgtle">4.9. check-pgtle</a></li>
<li><a href="#_run_pgtle">4.10. run-pgtle</a></li>
</ul>
</li>
<li><a href="#_version_specific_sql_files">5. Version-Specific SQL Files</a>
<ul class="sectlevel2">
<li><a href="#_how_version_files_are_generated">5.1. How Version Files Are Generated</a></li>
<li><a href="#_what_controls_the_version_number">5.2. What Controls the Version Number</a></li>
<li><a href="#_committing_version_files">5.3. Committing Version Files</a></li>
<li><a href="#_alternative_ignoring_version_files">5.4. Alternative: Ignoring Version Files</a></li>
<li><a href="#_distribution_inclusion">5.5. Distribution Inclusion</a></li>
<li><a href="#_multiple_versions">5.6. Multiple Versions</a></li>
</ul>
</li>
<li><a href="#_document_handling">6. Document Handling</a>
<ul class="sectlevel2">
<li><a href="#_document_variables">6.1. Document Variables</a></li>
<li><a href="#_document_rules">6.2. Document Rules</a></li>
<li><a href="#_the_docs_variable">6.3. The DOCS variable</a></li>
</ul>
</li>
<li><a href="#_pg_tle_support">7. pg_tle Support</a>
<ul class="sectlevel2">
<li><a href="#_what_is_pg_tle">7.1. What is pg_tle?</a></li>
<li><a href="#_quick_start">7.2. Quick Start</a></li>
<li><a href="#_version_groupings">7.3. Version Groupings</a></li>
<li><a href="#_installation_example">7.4. Installation Example</a></li>
<li><a href="#_advanced_usage">7.5. Advanced Usage</a></li>
<li><a href="#_how_it_works">7.6. How It Works</a></li>
<li><a href="#_troubleshooting">7.7. Troubleshooting</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>PGXNtool is meant to make developing new Postgres extensions for <a href="http://pgxn.org">PGXN</a> easier.</p>
</div>
<div class="paragraph">
<p>Currently, it consists a base Makefile that you can include instead of writing your own, a template META.json, and some test framework. More features will be added over time.</p>
</div>
<div class="paragraph">
<p>If you find any bugs or have ideas for improvements, please <a href="https://github.com/decibel/pgxntool/issues"><strong>open an issue</strong></a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_install"><a class="anchor" href="#_install"></a><a class="link" href="#_install">1. Install</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This assumes that you&#8217;ve already initialized your extension in git.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>--squash</code> is important! Otherwise you&#8217;ll clutter your repo with a bunch of commits you probably don&#8217;t want.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>git subtree add -P pgxntool --squash git@github.com:decibel/pgxntool.git release
pgxntool/setup.sh</pre>
</div>
</div>
<div class="paragraph">
<p>TODO: Create a nice script that will init a new project for you.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_development"><a class="anchor" href="#_development"></a><a class="link" href="#_development">2. Development</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you want to contribute to pgxntool development, work from the <a href="https://github.com/decibel/pgxntool-test">pgxntool-test</a> repository, not from this repository. That repository contains the test infrastructure and development tools needed to validate changes to pgxntool. This repository contains only the framework files that get embedded into extension projects via <code>git subtree</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_usage"><a class="anchor" href="#_usage"></a><a class="link" href="#_usage">3. Usage</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Typically, you can just create a simple Makefile that does nothing but include base.mk:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>include pgxntool/base.mk</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_make_targets"><a class="anchor" href="#_make_targets"></a><a class="link" href="#_make_targets">4. make targets</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>These are the make targets that are provided by base.mk</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
all the targets normally provided by Postgres <a href="http://www.postgresql.org/docs/current/static/extend-pgxs.html">PGXS</a> still work.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_html"><a class="anchor" href="#_html"></a><a class="link" href="#_html">4.1. html</a></h3>
<div class="paragraph">
<p>This will build any .html files that can be created. See <a href="#_Document_Handling">[_Document_Handling]</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_test"><a class="anchor" href="#_test"></a><a class="link" href="#_test">4.2. test</a></h3>
<div class="paragraph">
<p>Runs unit tests via the PGXS <code>installcheck</code> target. Unlike a simple <code>make installcheck</code> though, the <code>test</code> rule has the following prerequisites: clean testdeps install installcheck. All of those are PGXS rules, except for <code>testdeps</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
While you can still run <code>make installcheck</code> or any other valid PGXS make target directly, it&#8217;s recommended to use <code>make test</code> when using pgxntool. The <code>test</code> target ensures clean builds, proper test isolation, and correct dependency installation.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_testdeps"><a class="anchor" href="#_testdeps"></a><a class="link" href="#_testdeps">4.3. testdeps</a></h3>
<div class="paragraph">
<p>This rule allows you to ensure certain actions have taken place before running tests. By default it has a single prerequisite, <code>pgtap</code>, which will attempt to install <a href="http://pgtap.org">pgtap</a> from PGXN. This depneds on having the pgxn client installed.</p>
</div>
<div class="paragraph">
<p>You can add any other dependencies you want by simply adding another <code>testdeps</code> rule. For example:</p>
</div>
<div class="paragraph">
<p>testdeps example from <a href="https://github.com/decibel/test_factory/blob/493020d29ba976c38a98e7f1c68bfd89900f0e22/Makefile#L4">test_factory</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre>testdeps: check_control

.PHONY: check_control
check_control:
	grep -q "requires = 'pgtap, test_factory'" test_factory_pgtap.control</pre>
</div>
</div>
<div class="paragraph">
<p>If you want to over-ride the default dependency on <code>pgtap</code> you should be able to do that with a makefile override. If you need help with that, please <a href="https://github.com/decibel/pgxntool/issues">open an issue</a>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
It will probably cause problems if you try to create a <code>testdeps</code> rule that has a recipe. Instead of doing that, put the recipe in a separate rule and make that rule a prerequisite of <code>testdeps</code> as show in the example.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_results"><a class="anchor" href="#_results"></a><a class="link" href="#_results">4.4. results</a></h3>
<div class="paragraph">
<p>Because <code>make test</code> ultimately runs <code>installcheck</code>, it&#8217;s using the Postgres test suite. Unfortunately, that suite is based on running <code>diff</code> between a raw output file and expected results. I <strong>STRONGLY</strong> recommend you use <a href="http://pgtap.org">pgTap</a> instead! With pgTap, it&#8217;s MUCH easier to determine whether a test is passing or not - tests explicitly pass or fail rather than requiring you to examine diff output. The extra effort of learning pgTap will quickly pay for itself. <a href="https://github.com/decibel/trunklet-format/blob/master/test/sql/base.sql">This example</a> might help get you started.</p>
</div>
<div class="paragraph">
<p>No matter what method you use, once you know that all your tests are passing correctly, you need to create or update the test output expected files. <code>make results</code> does that for you.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<strong><code>make results</code> requires manual verification first</strong>. The correct workflow is:
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run <code>make test</code> and examine the diff output</p>
</li>
<li>
<p>Manually verify that the differences are correct and expected</p>
</li>
<li>
<p>Only then run <code>make results</code> to update the expected output files in <code>test/expected/</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Never run <code>make results</code> without first verifying the test changes are correct. The <code>results</code> target copies files from <code>test/results/</code> to <code>test/expected/</code>, so running it blindly will make incorrect output become the new expected behavior.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tag"><a class="anchor" href="#_tag"></a><a class="link" href="#_tag">4.5. tag</a></h3>
<div class="paragraph">
<p><code>make tag</code> will create a git branch for the current version of your extension, as determined by the META.json file. The reason to do this is so you can always refer to the exact code that went into a released version.</p>
</div>
<div class="paragraph">
<p>If there&#8217;s already a tag for the current version that probably means you forgot to update META.json, so you&#8217;ll get an error. If you&#8217;re certain you want to over-write the tag, you can do <code>make forcetag</code>, which removes the existing tag (via <code>make rmtag</code>) and creates a new one.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
You will be very unhappy if you forget to update the .control file for your extension! There is an <a href="https://github.com/decibel/pgxntool/issues/1">open issue</a> to improve this.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_dist"><a class="anchor" href="#_dist"></a><a class="link" href="#_dist">4.6. dist</a></h3>
<div class="paragraph">
<p><code>make dist</code> will create a .zip file for your current version that you can upload to PGXN. The file is named after the PGXN name and version (the top-level "name" and "version" attributes in META.json). The .zip file is placed in the <strong>parent</strong> directory so as not to clutter up your git repo.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Part of the <code>clean</code> recipe is cleaning up these .zip files. If you accidentally clean before uploading, just run <code>make dist-only</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_pgxntool_sync"><a class="anchor" href="#_pgxntool_sync"></a><a class="link" href="#_pgxntool_sync">4.7. pgxntool-sync</a></h3>
<div class="paragraph">
<p>This rule will pull down the latest released version of PGXNtool via <code>git subtree pull</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Your repository must be clean (no modified files) in order to run this. Running this command will produce a git commit of the merge.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
There is also a <code>pgxntool-sync-%</code> rule if you need to do more advanced things.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_pgtle"><a class="anchor" href="#_pgtle"></a><a class="link" href="#_pgtle">4.8. pgtle</a></h3>
<div class="paragraph">
<p>Generates pg_tle (Trusted Language Extensions) registration SQL files for deploying extensions in managed environments like AWS RDS/Aurora. See <a href="#_pg_tle_Support">[_pg_tle_Support]</a> for complete documentation.</p>
</div>
<div class="paragraph">
<p><code>make pgtle</code> generates SQL files in <code>pg_tle/</code> subdirectories organized by pg_tle version ranges. For version range details, see <code>pgtle_versions.md</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_check_pgtle"><a class="anchor" href="#_check_pgtle"></a><a class="link" href="#_check_pgtle">4.9. check-pgtle</a></h3>
<div class="paragraph">
<p>Checks if pg_tle is installed and reports the version. This target:
- Reports the version from <code>pg_extension</code> if <code>CREATE EXTENSION pg_tle</code> has been run in the database
- Errors if pg_tle is not available in the cluster</p>
</div>
<div class="paragraph">
<p>This target assumes <code>PG*</code> environment variables are configured for <code>psql</code> connectivity.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>make check-pgtle</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_run_pgtle"><a class="anchor" href="#_run_pgtle"></a><a class="link" href="#_run_pgtle">4.10. run-pgtle</a></h3>
<div class="paragraph">
<p>Registers all extensions with pg_tle by executing the generated pg_tle registration SQL files in a PostgreSQL database. This target:
- Requires pg_tle extension to be installed (checked via <code>check-pgtle</code>)
- Uses <code>pgtle.sh</code> to determine which version range directory to use based on the installed pg_tle version
- Runs all generated SQL files via <code>psql</code> to register your extensions with pg_tle</p>
</div>
<div class="paragraph">
<p>This target assumes that running <code>psql</code> without any arguments will connect to the desired database. You can control this by setting the various PG* environment variables (and possibly using the <code>.pgpassword</code> file). See the PostgreSQL documentation for more details.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>pgtle</code> target is a dependency, so <code>make run-pgtle</code> will automatically generate the SQL files if needed.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>make run-pgtle</pre>
</div>
</div>
<div class="paragraph">
<p>After running <code>make run-pgtle</code>, you can create your extension in the database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>CREATE EXTENSION "your-extension-name";</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_specific_sql_files"><a class="anchor" href="#_version_specific_sql_files"></a><a class="link" href="#_version_specific_sql_files">5. Version-Specific SQL Files</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>PGXNtool automatically generates version-specific SQL files from your base SQL file. These files follow the pattern <code>sql/{extension}--{version}.sql</code> and are used by PostgreSQL&#8217;s extension system to install specific versions of your extension.</p>
</div>
<div class="sect2">
<h3 id="_how_version_files_are_generated"><a class="anchor" href="#_how_version_files_are_generated"></a><a class="link" href="#_how_version_files_are_generated">5.1. How Version Files Are Generated</a></h3>
<div class="paragraph">
<p>When you run <code>make</code> (or <code>make all</code>), PGXNtool:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Reads your <code>META.json</code> file to determine the extension version from <code>provides.{extension}.version</code></p>
</li>
<li>
<p>Generates a Makefile rule that copies your base SQL file (<code>sql/{extension}.sql</code>) to the version-specific file (<code>sql/{extension}--{version}.sql</code>)</p>
</li>
<li>
<p>Executes this rule, creating the version-specific file with a header comment indicating it&#8217;s auto-generated</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example, if your <code>META.json</code> contains:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>"provides": {
  "myext": {
    "version": "1.2.3",
    ...
  }
}</pre>
</div>
</div>
<div class="paragraph">
<p>Running <code>make</code> will create <code>sql/myext&#8212;&#8203;1.2.3.sql</code> by copying <code>sql/myext.sql</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_what_controls_the_version_number"><a class="anchor" href="#_what_controls_the_version_number"></a><a class="link" href="#_what_controls_the_version_number">5.2. What Controls the Version Number</a></h3>
<div class="paragraph">
<p>The version number comes from <code>META.json</code> â†’ <code>provides.{extension}.version</code>, <strong>not</strong> from your <code>.control</code> file&#8217;s <code>default_version</code> field. The <code>.control</code> file&#8217;s <code>default_version</code> is used by PostgreSQL to determine which version to install by default, but the actual version-specific file that gets generated is determined by what&#8217;s in <code>META.json</code>.</p>
</div>
<div class="paragraph">
<p>To change the version of your extension:
1. Update <code>provides.{extension}.version</code> in <code>META.json</code>
2. Run <code>make</code> to regenerate the version-specific file
3. Update <code>default_version</code> in your <code>.control</code> file to match (if needed)</p>
</div>
</div>
<div class="sect2">
<h3 id="_committing_version_files"><a class="anchor" href="#_committing_version_files"></a><a class="link" href="#_committing_version_files">5.3. Committing Version Files</a></h3>
<div class="paragraph">
<p>Version-specific SQL files are now treated as permanent files that should be committed to your repository. This makes it much easier to test updates to extensions, as you can see exactly what SQL was included in each version.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
These files are auto-generated and include a header comment warning not to edit them. Any manual changes will be overwritten the next time you run <code>make</code>. To modify the extension, edit the base SQL file (<code>sql/{extension}.sql</code>) instead.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_alternative_ignoring_version_files"><a class="anchor" href="#_alternative_ignoring_version_files"></a><a class="link" href="#_alternative_ignoring_version_files">5.4. Alternative: Ignoring Version Files</a></h3>
<div class="paragraph">
<p>If you prefer not to commit version-specific SQL files, you must add them to your <code>.gitignore</code> to prevent <code>make dist</code> from failing due to untracked files. Add the following to your <code>.gitignore</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Auto-generated version-specific SQL files (if not committing them)
sql/*--*.sql
!sql/*--*--*.sql</pre>
</div>
</div>
<div class="paragraph">
<p>The second line (<code>!sql/<strong>--</strong>--*.sql</code>) ensures that upgrade scripts (which contain two version numbers and should be manually written) are still tracked.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
If you ignore version files instead of committing them, they will NOT be included in your PGXN distribution (<code>make dist</code> uses <code>git archive</code>, which only includes tracked files). This means users installing your extension from PGXN will need <code>make</code> and PGXS available to build the extension - they cannot simply copy the SQL files into their PostgreSQL installation. For maximum compatibility, we recommend committing version files.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_distribution_inclusion"><a class="anchor" href="#_distribution_inclusion"></a><a class="link" href="#_distribution_inclusion">5.5. Distribution Inclusion</a></h3>
<div class="paragraph">
<p>Version-specific files are included in distributions created by <code>make dist</code> only if they are committed to git. Since <code>make dist</code> uses <code>git archive</code>, only tracked files are included in the distribution archive.</p>
</div>
</div>
<div class="sect2">
<h3 id="_multiple_versions"><a class="anchor" href="#_multiple_versions"></a><a class="link" href="#_multiple_versions">5.6. Multiple Versions</a></h3>
<div class="paragraph">
<p>If you need to support multiple versions of your extension:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create additional version-specific files manually (e.g., <code>sql/myext&#8212;&#8203;1.0.0.sql</code>, <code>sql/myext&#8212;&#8203;1.1.0.sql</code>)</p>
</li>
<li>
<p>Create upgrade scripts for version transitions (e.g., <code>sql/myext&#8212;&#8203;1.0.0&#8212;&#8203;1.1.0.sql</code>)</p>
</li>
<li>
<p>Update <code>META.json</code> to reflect the current version you&#8217;re working on</p>
</li>
<li>
<p>Commit all version files and upgrade scripts to your repository</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The version file for the current version (specified in <code>META.json</code>) will be automatically regenerated when you run <code>make</code>, but other version files you create manually will be preserved.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_document_handling"><a class="anchor" href="#_document_handling"></a><a class="link" href="#_document_handling">6. Document Handling</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>PGXNtool supports generation and installation of document files. There are several variables and rules that control this behavior.</p>
</div>
<div class="paragraph">
<p>It is recommended that you commit any generated documentation files (such as HTML generated from Asciidoc) into git.
That way users will have these files installed when they install your extension.
If any generated files are missing (or out-of-date) during installation, PGXNtool will build them if Asciidoc is present on the system.</p>
</div>
<div class="sect2">
<h3 id="_document_variables"><a class="anchor" href="#_document_variables"></a><a class="link" href="#_document_variables">6.1. Document Variables</a></h3>
<div class="dlist">
<dl>
<dt class="hdlist1">DOC_DIRS</dt>
<dd>
<p>Directories to look for documents in.
Defined as <code>+= doc</code>.</p>
</dd>
<dt class="hdlist1">DOCS</dt>
<dd>
<p>PGXS variable.
See <a href="#_the_docs_variable">The DOCS variable</a> below.</p>
</dd>
<dt class="hdlist1">DOCS_HTML</dt>
<dd>
<p>Document HTML files.
PGXNtool appends `$(ASCIIDOC_HTML) to this variable.</p>
</dd>
<dt class="hdlist1">ASCIIDOC</dt>
<dd>
<p>Location of <code>asciidoc</code> or equivalent executable.
If not set PGXNtool will search for first <code>asciidoctor</code>, then <code>asciidoc</code>.</p>
</dd>
<dt class="hdlist1">ASCIIDOC_EXTS</dt>
<dd>
<p>File extensions to consider as Asciidoc.
Defined as <code>+= adoc asciidoc</code>.</p>
</dd>
<dt class="hdlist1">ASCIIDOC_FILES</dt>
<dd>
<p>Asciidoc input files.
PGXNtool searches each <code>$(DOC_DIRS)</code> directory, looking for files with any <code>$(ASCIIDOC_EXTS)</code> extension.
Any files found are added to <code>ASCIIDOC_FILES</code> using <code>+=</code>.</p>
</dd>
<dt class="hdlist1">ASCIIDOC_FLAGS</dt>
<dd>
<p>Additional flags to pass to Asciidoc.</p>
</dd>
<dt class="hdlist1">ASCIIDOC_HTML</dt>
<dd>
<p>PGXNtool replaces each <code>$(ASCIIDOC_EXTS)</code> in <code>$(ASCIIDOC_FILES)</code> with <code>html</code>.
The result is appended to <code>ASCIIDOC_HTML</code> using <code>+=</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_document_rules"><a class="anchor" href="#_document_rules"></a><a class="link" href="#_document_rules">6.2. Document Rules</a></h3>
<div class="paragraph">
<p>If Asciidoc is found (or <code>$(ASCIIDOC)</code> is set), the <code>html</code> rule will be added as a prerequisite to the <code>install</code> and <code>installchec</code> rules.
That will ensure that docs are generated for install and test, but only if Asciidoc is available.
The <code>dist</code> rule will always depend on <code>html</code> though, to ensure html files are up-to-date before creating a distribution.</p>
</div>
<div class="paragraph">
<p>The <code>html</code> rule simply depends on `$(ASCIIDOC_HTML).
This rule is always present.</p>
</div>
<div class="paragraph">
<p>For each Asciidoc extension in <code>$(ASCIIDOC_EXTS)</code> a rule is generated to build a .html file from that extension using <code>$(ASCIIDOC)</code>.
These rules are generated from <code>ASCIIDOC_template</code>:</p>
</div>
<div class="listingblock">
<div class="title">ASCIIDOC_template</div>
<div class="content">
<pre class="highlight"><code class="language-Makefile" data-lang="Makefile">define ASCIIDOC_template
%.html: %.$(1) # <b class="conum">(1)</b>
ifndef ASCIIDOC
	$$(warning Could not find "asciidoc" or "asciidoctor". Add one of them to your PATH,)
	$$(warning or set ASCIIDOC to the correct location.)
	$$(error Could not build %$$@)
endif # ifndef ASCIIDOC
	$$(ASCIIDOC) $$(ASCIIDOC_FLAGS) $$&lt;
endef # define ASCIIDOC_template</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>$(1)</code> is replaced by the extension.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>These rules will <strong>always</strong> exist, even if <code>$(ASCIIDOC)</code> isn&#8217;t set (ie: if Asciidoc wasn&#8217;t found on the system).
These rules will throw an error if they are run if <code>$(ASCIIDOC)</code> isn&#8217;t defined.
On a normal user system that should never happen, because the <code>html</code> rule won&#8217;t be included in <code>install</code> or <code>installcheck</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_docs_variable"><a class="anchor" href="#_the_docs_variable"></a><a class="link" href="#_the_docs_variable">6.3. The DOCS variable</a></h3>
<div class="paragraph">
<p>This variable has special meaning to PGXS.
See the Postgres documentation for full details.</p>
</div>
<div class="paragraph">
<p>If DOCS is defined when PGXS is included then rules will be added to install everything defined by $(DOCS) in <code>PREFIX/share/doc/extension</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If DOCS is defined but empty some of the PGXS targets will error out.
Because of this, <code>base.mk</code> will forcibly define it to be NULL if it&#8217;s empty.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>PGXNtool appends <strong>all</strong> files found in all <code>$(DOC_DIRS)</code> to <code>DOCS</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pg_tle_support"><a class="anchor" href="#_pg_tle_support"></a><a class="link" href="#_pg_tle_support">7. pg_tle Support</a></h2>
<div class="sectionbody">
<div id="_pg_tle_Support" class="paragraph">
<p>pgxntool can generate <a href="https://github.com/aws/pg_tle">pg_tle (Trusted Language Extensions)</a> registration SQL for deploying PostgreSQL extensions in managed environments like AWS RDS and Aurora where filesystem access is not available.</p>
</div>
<div class="paragraph">
<p>For make targets, see: <a href="#_pgtle">pgtle</a>, <a href="#_check_pgtle">check-pgtle</a>, <a href="#_run_pgtle">run-pgtle</a>.</p>
</div>
<div class="sect2">
<h3 id="_what_is_pg_tle"><a class="anchor" href="#_what_is_pg_tle"></a><a class="link" href="#_what_is_pg_tle">7.1. What is pg_tle?</a></h3>
<div class="paragraph">
<p>pg_tle is an AWS open-source framework that enables developers to create and deploy PostgreSQL extensions without filesystem access. Traditional PostgreSQL extensions require <code>.control</code> and <code>.sql</code> files on the filesystem, which isn&#8217;t possible in managed services like RDS and Aurora.</p>
</div>
<div class="paragraph">
<p>pg_tle solves this by:
- Storing extension metadata and SQL in database tables
- Using the <code>pgtle_admin</code> role for administrative operations
- Enabling <code>CREATE EXTENSION</code> to work in managed environments</p>
</div>
</div>
<div class="sect2">
<h3 id="_quick_start"><a class="anchor" href="#_quick_start"></a><a class="link" href="#_quick_start">7.2. Quick Start</a></h3>
<div class="paragraph">
<p>Generate pg_tle registration SQL for your extension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>make pgtle</pre>
</div>
</div>
<div class="paragraph">
<p>This creates files in <code>pg_tle/</code> subdirectories organized by pg_tle version ranges. See <code>pgtle_versions.md</code> for complete version range details and API compatibility boundaries.</p>
</div>
</div>
<div class="sect2">
<h3 id="_version_groupings"><a class="anchor" href="#_version_groupings"></a><a class="link" href="#_version_groupings">7.3. Version Groupings</a></h3>
<div class="paragraph">
<p>pgxntool creates different sets of files for different pg_tle versions to handle backward-incompatible API changes. Each version boundary represents a change to pg_tle&#8217;s API functions that we use.</p>
</div>
<div class="paragraph">
<p>For details on version boundaries and API changes, see <code>pgtle_versions.md</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_installation_example"><a class="anchor" href="#_installation_example"></a><a class="link" href="#_installation_example">7.4. Installation Example</a></h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
This is only a basic example. Always refer to the <a href="https://github.com/aws/pg_tle">main pg_tle documentation</a> for complete installation instructions and best practices.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Basic installation steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure pg_tle is installed and grant the <code>pgtle_admin</code> role to your user</p>
</li>
<li>
<p>Generate and run the pg_tle registration SQL files:</p>
<div class="listingblock">
<div class="content">
<pre>make run-pgtle</pre>
</div>
</div>
<div class="paragraph">
<p>This automatically detects your pg_tle version and runs the appropriate SQL files. See <code>pgtle_versions.md</code> for version range details.</p>
</div>
</li>
<li>
<p>Create your extension: <code>CREATE EXTENSION myextension;</code></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_advanced_usage"><a class="anchor" href="#_advanced_usage"></a><a class="link" href="#_advanced_usage">7.5. Advanced Usage</a></h3>
<div class="sect3">
<h4 id="_multi_extension_projects"><a class="anchor" href="#_multi_extension_projects"></a><a class="link" href="#_multi_extension_projects">7.5.1. Multi-Extension Projects</a></h4>
<div class="paragraph">
<p>If your project has multiple extensions (multiple <code>.control</code> files), <code>make pgtle</code> generates files for all of them:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>myproject/
â”œâ”€â”€ ext1.control
â”œâ”€â”€ ext2.control
â””â”€â”€ pg_tle/
    â”œâ”€â”€ 1.0.0-1.5.0/
    â”‚   â”œâ”€â”€ ext1.sql
    â”‚   â””â”€â”€ ext2.sql
    â””â”€â”€ 1.5.0+/
        â”œâ”€â”€ ext1.sql
        â””â”€â”€ ext2.sql</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_it_works"><a class="anchor" href="#_how_it_works"></a><a class="link" href="#_how_it_works">7.6. How It Works</a></h3>
<div class="paragraph">
<p><code>make pgtle</code> does the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Parses control file(s): Extracts <code>comment</code>, <code>default_version</code>, <code>requires</code>, and <code>schema</code> fields</p>
</li>
<li>
<p>Discovers SQL files: Finds all versioned files (<code>sql/{ext}--{version}.sql</code>) and upgrade scripts (<code>sql/{ext}--{ver1}--{ver2}.sql</code>)</p>
</li>
<li>
<p>Wraps SQL content: Uses a fixed dollar-quote delimiter (<code>$<em>pgtle_wrap_delimiter</em>$</code>) to wrap SQL for pg_tle functions</p>
</li>
<li>
<p>Generates registration SQL: Creates <code>pgtle.install_extension()</code> calls for each version, <code>pgtle.install_update_path()</code> for upgrades, and <code>pgtle.set_default_version()</code> for the default</p>
</li>
<li>
<p>Version-specific output: Generates separate files for different pg_tle capability levels</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Each generated SQL file is wrapped in a transaction (<code>BEGIN;</code> &#8230;&#8203; <code>COMMIT;</code>) to ensure atomic installation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_troubleshooting"><a class="anchor" href="#_troubleshooting"></a><a class="link" href="#_troubleshooting">7.7. Troubleshooting</a></h3>
<div class="sect3">
<h4 id="_no_versioned_sql_files_found"><a class="anchor" href="#_no_versioned_sql_files_found"></a><a class="link" href="#_no_versioned_sql_files_found">7.7.1. "No versioned SQL files found"</a></h4>
<div class="paragraph">
<p><strong>Problem</strong>: The script can&#8217;t find <code>sql/{ext}--{version}.sql</code> files.</p>
</div>
<div class="paragraph">
<p><strong>Solution</strong>: Run <code>make</code> first to generate versioned files from your base <code>sql/{ext}.sql</code> file.</p>
</div>
</div>
<div class="sect3">
<h4 id="_control_file_not_found"><a class="anchor" href="#_control_file_not_found"></a><a class="link" href="#_control_file_not_found">7.7.2. "Control file not found"</a></h4>
<div class="paragraph">
<p><strong>Problem</strong>: The script can&#8217;t find <code>{ext}.control</code> in the current directory.</p>
</div>
<div class="paragraph">
<p><strong>Solution</strong>: Run <code>make pgtle</code> from your extension&#8217;s root directory (where the <code>.control</code> file is).</p>
</div>
</div>
<div class="sect3">
<h4 id="_sql_file_contains_reserved_pg_tle_delimiter"><a class="anchor" href="#_sql_file_contains_reserved_pg_tle_delimiter"></a><a class="link" href="#_sql_file_contains_reserved_pg_tle_delimiter">7.7.3. "SQL file contains reserved pg_tle delimiter"</a></h4>
<div class="paragraph">
<p><strong>Problem</strong>: Your SQL files contain the string <code>$<em>pgtle_wrap_delimiter</em>$</code> (extremely unlikely).</p>
</div>
<div class="paragraph">
<p><strong>Solution</strong>: Don&#8217;t use that dollar-quote delimiter in your code.</p>
</div>
</div>
<div class="sect3">
<h4 id="_extension_uses_c_code"><a class="anchor" href="#_extension_uses_c_code"></a><a class="link" href="#_extension_uses_c_code">7.7.4. Extension uses C code</a></h4>
<div class="paragraph">
<p><strong>Problem</strong>: Your control file has <code>module_pathname</code>, indicating C code.</p>
</div>
<div class="paragraph">
<p><strong>Solution</strong>: pg_tle only supports trusted languages. You cannot use C extensions with pg_tle. The script will warn you but still generate files (which won&#8217;t work).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
there are several untrusted languages (such as plpython), and the only tests for C.
== Copyright
Copyright (c) 2026 Jim Nasby &lt;<a href="mailto:Jim.Nasby@gmail.com">Jim.Nasby@gmail.com</a>&gt;
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>PGXNtool is released under a <a href="https://github.com/decibel/pgxntool/blob/master/LICENCE">BSD license</a>. Note that it includes <a href="https://github.com/dominictarr/JSON.sh">JSON.sh</a>, which is released under a <a href="https://github.com/decibel/pgxntool/blob/master/JSON.sh.LICENCE">MIT license</a>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2026-01-21 16:47:02 -0600
</div>
</div>
</body>
</html>